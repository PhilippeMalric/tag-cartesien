/* --- Toolbar --- */
.toolbar {
  position: sticky;
  top: 0;
  z-index: 10;
  box-shadow: 0 2px 8px rgba(0,0,0,.28);
  min-height: 56px;
}
.title { margin-left: .5rem; font-weight: 700; letter-spacing: .2px; }
.spacer { flex: 1 1 auto; }

/* --- Page wrapper --- */
.page {
  max-width: 960px;
  margin: 12px auto 96px;
  padding: 0 12px;
  display: grid;
  gap: 16px;
}

/* --- Édition du nom --- */
.name-edit {
  display: flex;
  align-items: center;
  gap: .5rem;
  padding: .5rem .75rem;
  border-radius: 10px;
  background: color-mix(in srgb, var(--mat-sys-surface, #121212) 80%, transparent);
}
.name-edit .display-name {
  font-weight: 700;
  letter-spacing: .2px;
}
.name-field { width: 240px; max-width: 75vw; }

/* --- Cartes --- */
.card { border-radius: 14px; }
.card .h6 { font-weight: 700; letter-spacing: .2px; }

/* --- Grilles boutons/champs --- */
.card-grid,
.join-grid {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 12px;
  align-items: center;
}
.fx1 { min-width: 220px; }
.btn-primary, .btn-secondary { display: inline-flex; align-items: center; gap: .5rem; }
.btn-text { display: none; }
@media (min-width: 420px) {
  .btn-text { display: inline; }
}

/* --- Liste des rooms --- */
.rooms { padding-block: 0; }

/* Item : carte douce + hover subtil */
.room-item {
  --hover-bg: color-mix(in srgb, var(--mat-sys-primary) 6%, transparent);
  --card-bg: color-mix(in srgb, var(--mat-sys-surface) 100%, transparent);
  background: var(--card-bg);
  border-radius: 14px;
  min-height: 78px;
  padding-block: 12px;
  margin-block: 4px;
  transition: background-color .18s ease, transform .08s ease, box-shadow .18s ease;
}
.room-item:hover { background: var(--hover-bg); box-shadow: 0 2px 10px rgba(0,0,0,.06); }
.room-item:active { transform: translateY(1px); }
.room-item:focus-visible { outline: 2px solid var(--mat-sys-primary); outline-offset: 3px; }
:root.dark .room-item:hover { --hover-bg: color-mix(in srgb, var(--mat-sys-primary) 10%, transparent); }

/* Avatar à gauche */
.room-icon { margin-right: 8px; }
.room-avatar {
  width: 40px; height: 40px; border-radius: 12px;
  display: grid; place-items: center;
  background: color-mix(in srgb, var(--mat-sys-primary) 16%, transparent);
}
.room-avatar mat-icon { font-size: 22px; opacity: .9; }

/* Titre */
.room-title {
  display: flex; align-items: center; gap: 8px;
  font-weight: 700; letter-spacing: .2px;
}
.room-id { font-variant-numeric: tabular-nums; }
.dot { opacity: .45; }

/* Joueurs (badge) */
.room-players { display: inline-flex; align-items: center; gap: 6px; }
.meta-ic { font-size: 18px; height: 18px; width: 18px; opacity: .85; }
::ng-deep .mat-badge-content { font-weight: 700; line-height: 1; }

/* Chips meta */
.room-meta { margin-top: 4px; }
.meta-chips { display: flex; flex-wrap: wrap; gap: 8px; }
.meta-chips mat-chip mat-icon { margin-right: 6px; }

/* Chip mode : couleurs par mode */
.mode-chip { text-transform: capitalize; }
.mode-classic {
  background: color-mix(in srgb, #4caf50 18%, transparent);
  color: color-mix(in srgb, #123 20%, #000 80%);
}
.mode-transmission {
  background: color-mix(in srgb, #2196f3 18%, transparent);
  color: color-mix(in srgb, #123 20%, #000 80%);
}
.mode-infection {
  background: color-mix(in srgb, #ff9800 20%, transparent);
  color: color-mix(in srgb, #123 20%, #000 80%);
}

/* Chip état avec point lumineux */
.state-chip { position: relative; padding-left: 6px; }
.state-dot {
  width: 8px; height: 8px; border-radius: 50%;
  display: inline-block; margin-right: 6px;
  background: color-mix(in srgb, currentColor 40%, transparent);
  box-shadow: 0 0 0 2px color-mix(in srgb, currentColor 25%, transparent) inset;
}
.state-dot.is-on {
  background: var(--mat-sys-primary);
  box-shadow:
    0 0 0 2px color-mix(in srgb, var(--mat-sys-primary) 30%, transparent) inset,
    0 0 8px color-mix(in srgb, var(--mat-sys-primary) 60%, transparent);
}

/* Actions à droite */
.actions { display: flex; gap: 12px; align-items: center; }
.action-btn {
  width: 52px; height: 52px; border-radius: 50%;
  display: inline-flex; align-items: center; justify-content: center;
  box-shadow: 0 2px 8px rgba(0,0,0,.12), 0 1px 3px rgba(0,0,0,.20);
  transition: transform .08s ease, box-shadow .2s ease, filter .2s ease, background-color .2s ease;
}
.action-btn mat-icon { font-size: 22px; line-height: 1; }
.action-btn:hover:not([disabled]) {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(0,0,0,.16), 0 2px 4px rgba(0,0,0,.24);
}
.action-btn:active:not([disabled]) { transform: translateY(0); filter: brightness(.98); }
.action-btn[disabled] { filter: grayscale(.2) opacity(.75); box-shadow: none; transform: none; }

/* Responsive */
@media (max-width: 520px) {
  .room-title { gap: 6px; flex-wrap: wrap; }
  .actions { gap: 10px; }
  .action-btn { width: 48px; height: 48px; }
  .action-btn mat-icon { font-size: 21px; }
}

/* Accessibilité / motion */
@media (prefers-reduced-motion: reduce) { .room-item { transition: none; } }
.chip-active {
  font-weight: 600;
  box-shadow: 0 0 0 1px color-mix(in srgb, currentColor 35%, transparent) inset;
}

/* --- FAB primaire (mobile) --- */
.fab {
  position: fixed;
  right: 16px;
  bottom: 16px;
  z-index: 20;
  box-shadow: 0 8px 24px rgba(0,0,0,.45);
}
@media (min-width: 900px) {
  .fab { right: 24px; bottom: 24px; }
}
